# Handling names

The below provides a summary of how paricipant names are handled for the Bohemia project.

## 5 Principles
- There is no research value in participant names
- There is operational value in participant names
- Sites (CISM, IHI) can access and store participant names
- Sponor (ISGlobal) cannot store participant names
- Sponsor-contracted third parties (Databrew) cannot store participant names

## The problem

The first four of the above five problems pose no problems. However, the fifth principle is slightly problematic. The reason is that the sponsor-contracted third party (Databrew) needs to generate digital forms in which names are included (ie, fieldworkers need to select a household and household member, and pre-populate certain fields based on the selection). In order for Databrew to put a name on a form Databrew needs access to that name.

### Side-note: Why not just use the local site databases?

If the third-party contractor cannot store names, but sites can, why not just use the names data from the site databases to populate forms? The reason is that Databrew carries out data processing tasks which sometimes result in the alteration of an incorrectly-enumerated participant ID number or the removal of a duplicated participant. These alterations occur in the Databrew database, but do not get copied over to the site databases (since the site databases are unmodified/raw). Therefore, if the tablets relied solely on the names data from the site databases, they may end up with duplicates and errors.

## The solution

We propose a solution wherein:
- The Databrew-maintained central database is split into two:
  - 1. The "consortium database" (for operational purposes) which includes name variables but only after prior hashing (ie, conversion to a format which can only be backwards-engineered using a de-encryption key)
  - 2. The "study database" (for research purposes) which includes no name variables

The below shows a schema of the data flow.

![](img/names.png)

### Principles of the solution

- Data is sent (with names) from tablets to the site databases.
- An automated script retrieves data from the site databases, process/formats that data, and hashes all names. Following hashing, data is saved into the "consortium database" where it undergoes structured modifications (data cleaning) which are logged.  
- When a new form needs to be generated, Databrew uses the "consortium database" to generate certain multiple choice fields which require names. Because these names are hashes in the database, the form generated by Databrew contains choices that look like this (example only):

Question 13: Select the member of the household

```
A. 8s7df8a7ds68ashasdhp
B. a;ldfh9asdfsa232l2j;
C. 2l;j2g3iu2;os9-dlls1
D. dsa0s92n-2jp2on3h12%
```

- When the sites retrieve the forms created by Databrew, they use the combination of (a) a de-encryption script provided by Databrew and (b) a de-encryption key file to convert values like `dsa0s92n-2jp2on3h12%` to `Wanjiru Kimani`.  
- Following conversion, the sites upload the the (de-encrypted) form to their local ODK forms server.  
- Since the de-encrypted form contains human-readable names, the tablets will be able to include names in the drop-downs in the following format:

Question 13: Select the member of the household

```
A. John Doe
B. Jane Doe
C. Alice Doe
D. Wanjiru Kimani
```

## Comment on the "de-encryption key"

- The "de-encryption key" is essentially a (very long) password.  
- Two options for ownership / access to the de-encryption key:
  - Only site has a de-encryption key. Databrew cannot de-encrypt.
  - Both site and Databrew have a copy. Databrew can de-encrypt in case a site loses their key
- The first option is more secure in terms of protecting names from being disclosed
- The second option is more secure in terms of recovering names in case a site loses the de-encryption key
